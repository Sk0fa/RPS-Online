<html>
<head>
<title>RPS-Online</title>
</head>
<body>
<ul id="list">
</ul>

<form id="form">
    <input type="text" id="input" required autofocus autocomplete="off">
</form>

<script>
const ws = new WebSocket('ws://localhost:8000');

function message(msg) {
	const li = document.createElement('li');

	li.innerHTML = msg;
	var list = document.getElementById('list');
	list.appendChild(li);
}

ws.onmessage = (msg) => message(msg.data);

form.addEventListener('submit', event => {
	event.preventDefault();
    var inputValue = input.value;
    if (inputValue.startsWith('!login')) {
        var login = inputValue.split(' ')[1];
        msg = JSON.stringify({
            'type': 'login',
            'login': login
        });
        ws.send(msg);
    }
	input.value = '';
});
</script>
</body>
</html>
